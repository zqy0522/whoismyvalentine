<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>valentine</title>
  <style>
    :root{
      --card:#ffffffcc;
      --shadow: 0 24px 80px rgba(0,0,0,.18);
      --text:#0b0b0b;
      --pink:#ff3b86;
      --grayBtn:#e9edf2;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 800px at 20% 20%, #ffd2e0, transparent 55%),
        radial-gradient(1200px 800px at 80% 80%, #ffc1d6, transparent 55%),
        linear-gradient(135deg, #ffeaf2, #ffd6e6);
      color:var(--text);
      overflow:hidden;
    }

    .card{
      width:min(1100px, 92vw);
      border-radius:38px;
      background:var(--card);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      padding:40px 34px 34px;
      text-align:center;
      position:relative;
    }

    /* top icon */
    .iconWrap{
      width:180px;
      height:180px;
      margin:0 auto 12px;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.18));
    }
    .iconWrap svg{ width:100%; height:100%; display:block; }

    h1{
      margin:12px 0 26px;
      font-size: clamp(34px, 5vw, 64px);
      letter-spacing:-.03em;
      font-weight:900;
    }

    /* button area */
    .stage{
      position:relative;
      height:190px;
      width:min(820px, 88vw);
      margin:0 auto;
    }
    button{
      border:0;
      cursor:pointer;
      font-weight:900;
      border-radius:999px;
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      user-select:none;
      touch-action: manipulation;
      position:absolute;
      top:50%;
      transform: translate(-50%,-50%);
      transition: transform .06s ease, filter .2s ease;
      white-space:nowrap;
    }
    button:active{ transform: translate(-50%,-49%) scale(.99); }

    /* YES huge */
    #yesBtn{
      left:40%;
      background:var(--pink);
      color:#fff;
      font-size: clamp(34px, 3.4vw, 56px);
      padding: 34px 86px;
    }

    /* NO small gray */
    #noBtn{
      left:74%;
      background:var(--grayBtn);
      color:#111827;
      font-size: 22px;
      padding: 14px 26px;
      box-shadow: 0 14px 28px rgba(0,0,0,.14);
    }

    .hint{
      margin-top:18px;
      font-size:18px;
      opacity:.75;
      min-height:24px;
    }

    /* second page content */
    .yay{
      display:none;
      margin-top:10px;
      padding-top:8px;
    }
    .yayTitle{
      font-size: clamp(40px, 5vw, 70px);
      font-weight:1000;
      letter-spacing:-.03em;
      margin:8px 0 16px;
    }

    .slideshow{
      width:min(820px, 88vw);
      aspect-ratio: 16 / 10;
      margin:0 auto;
      border-radius:20px;
      overflow:hidden;
      position:relative;
      background:#f3f4f6;
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
    }
    .slide{
      position:absolute; inset:0;
      opacity:0;
      transition: opacity .35s ease;
      background-size: cover;
      background-position: center;
      transform: scale(1.01);
    }
    .slide.active{ opacity:1; }

    .caption{
      position:absolute;
      left:14px; right:14px; bottom:14px;
      padding:10px 14px;
      border-radius:16px;
      background: rgba(0,0,0,.45);
      color:#fff;
      font-size:15px;
      backdrop-filter: blur(6px);
    }

    /* floating hearts */
    .heart{
      position:fixed;
      bottom:-20px;
      pointer-events:none;
      opacity:.95;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.15));
      animation: floatUp linear forwards;
    }
    @keyframes floatUp{
      to{ transform: translateY(-120vh) translateX(var(--drift)); opacity:0; }
    }

    /* finale overlay */
    .finale{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      z-index:9999;
    }
    .finaleBox{
      width:min(920px, 92vw);
      padding:26px 18px;
      border-radius:28px;
      background: rgba(255,255,255,.92);
      box-shadow: 0 26px 90px rgba(0,0,0,.30);
      text-align:center;
    }
    .finaleText{
      font-weight:1000;
      letter-spacing:-.02em;
      font-size: clamp(28px, 4vw, 54px);
      margin:0;
    }
    .finaleSub{
      margin:10px 0 0;
      font-size:18px;
      opacity:.8;
    }

    /* heartbreak overlay (if NO is clicked) */
    .heartbreak{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.52);
      backdrop-filter: blur(6px);
      z-index:10000;
    }
    .heartbreakBox{
      width:min(880px, 92vw);
      padding:26px 18px;
      border-radius:28px;
      background: rgba(255,255,255,.94);
      box-shadow: 0 26px 90px rgba(0,0,0,.34);
      text-align:center;
    }
    .heartbreakTitle{
      font-weight:1000;
      letter-spacing:-.02em;
      font-size: clamp(30px, 4vw, 56px);
      margin:0 0 10px;
    }
    .heartbreakMsg{
      margin:0;
      font-size: clamp(16px, 2.2vw, 22px);
      opacity:.9;
    }

    @media (max-width:520px){
      .card{ padding:26px 16px 22px; border-radius:26px; }
      .iconWrap{ width:150px; height:150px; }
      .stage{ height:170px; }
      #yesBtn{ padding: 26px 62px; }
    }
  </style>
</head>

<body>
  <main class="card" id="card">
    <div class="iconWrap" aria-hidden="true">
      <svg viewBox="0 0 220 220">
        <defs>
          <radialGradient id="g" cx="50%" cy="40%" r="70%">
            <stop offset="0%" stop-color="#ffd5b8"/>
            <stop offset="100%" stop-color="#f4b28c"/>
          </radialGradient>
          <linearGradient id="h" x1="0" x2="1">
            <stop offset="0" stop-color="#ff4a8e"/>
            <stop offset="1" stop-color="#ff1f6d"/>
          </linearGradient>
        </defs>
        <path d="M158 44c-8 0-15 5-18 12-3-7-10-12-18-12-11 0-20 9-20 20 0 20 38 43 38 43s38-23 38-43c0-11-9-20-20-20z"
              fill="url(#h)" opacity="0.95"/>
        <circle cx="110" cy="120" r="72" fill="url(#g)"/>
        <path d="M63 78l28 12-16 22z" fill="#f0ab7c"/>
        <path d="M157 78l-28 12 16 22z" fill="#f0ab7c"/>
        <circle cx="88" cy="118" r="8" fill="#0b0b0b"/>
        <circle cx="132" cy="118" r="8" fill="#0b0b0b"/>
        <path d="M110 126c10 6 10 18 0 24-10-6-10-18 0-24z" fill="#ff77a8"/>
      </svg>
    </div>

    <h1><span id="nameTarget">Kubie</span> will you be my valentine?</h1>

    <div class="stage" id="stage">
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
    </div>

    <div class="hint" id="hint">‚ÄúNo‚Äù seems a bit shy üòà</div>

    <section class="yay" id="yay">
      <div class="yayTitle">YAY! üéâü•≥üíñ</div>

      <div class="slideshow" id="slideshow">
        <div class="caption" id="caption">Loading photos‚Ä¶</div>
      </div>
    </section>
  </main>

  <!-- finale message overlay -->
  <div class="finale" id="finale">
    <div class="finaleBox">
      <p class="finaleText">HAPPY VALENTINES MY CUTIE! READY FOR OUR FANCY DATIES?</p>
      <p class="finaleSub">üéÜüéáüíñ</p>
    </div>
  </div>

  <!-- heartbreak overlay (if NO is clicked) -->
  <div class="heartbreak" id="heartbreak">
    <div class="heartbreakBox">
      <p class="heartbreakTitle">üíî GIRLFRIEND HEARTBROKEN üíî</p>
      <p class="heartbreakMsg">Give girlfriend a bit huggie right now!!</p>
    </div>
  </div>

  <script>
    // =======================
    // CUSTOMISE HERE
    // =======================
    const TARGET_NAME = "Kubie";

    // Reaction-time-ish feel:
    // Humans react ~200ms+; we move FAST but not impossible.
    const EVADE_DISTANCE = 220;     // bigger = starts running earlier (harder)
    const MOVE_MIN = 140;           // bigger jumps = harder
    const MOVE_MAX = 320;
    const COOLDOWN_MS = 85;         // limit how often it can move (keeps it "possible")
    const EDGE_PAD = 10;

    // photos: name them photo01.jpg ... photo50.jpg
    function generatePhotos(count, ext="jpg", prefix="photo") {
      const arr = [];
      for (let i = 1; i <= count; i++) {
        const num = String(i).padStart(2, "0");
        arr.push({ src: `${prefix}${num}.${ext}`, caption: "" });
      }
      return arr;
    }
    const PHOTOS = generatePhotos(50, "jpg", "photo");
    const SLIDE_MS = 1000;
    // =======================

    document.getElementById("nameTarget").textContent = TARGET_NAME;

    const stage = document.getElementById("stage");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const yay    = document.getElementById("yay");
    const hint   = document.getElementById("hint");

    const slideshow = document.getElementById("slideshow");
    const captionEl = document.getElementById("caption");

    function clamp(v, lo, hi){ return Math.max(lo, Math.min(hi, v)); }

    function setNoCenter(x, y){
      noBtn.style.left = (x + noBtn.offsetWidth/2) + "px";
      noBtn.style.top  = (y + noBtn.offsetHeight/2) + "px";
    }

    function randomNearPointer(clientX, clientY){
      const rect = stage.getBoundingClientRect();

      const angle = Math.random() * Math.PI * 2;
      const radius = MOVE_MIN + Math.random() * (MOVE_MAX - MOVE_MIN);

      let x = (clientX - rect.left) + Math.cos(angle) * radius;
      let y = (clientY - rect.top)  + Math.sin(angle) * radius;

      x = clamp(x, EDGE_PAD, rect.width  - noBtn.offsetWidth  - EDGE_PAD);
      y = clamp(y, EDGE_PAD, rect.height - noBtn.offsetHeight - EDGE_PAD);

      setNoCenter(x, y);
    }

    function distToNo(clientX, clientY){
      const b = noBtn.getBoundingClientRect();
      const cx = b.left + b.width/2;
      const cy = b.top  + b.height/2;
      return Math.hypot(clientX - cx, clientY - cy);
    }

    // Move limiter so it's fast but still "possible" to click
    let lastMove = 0;
    function maybeMove(clientX, clientY){
      const now = performance.now();
      if (now - lastMove < COOLDOWN_MS) return;
      lastMove = now;
      randomNearPointer(clientX, clientY);
    }

    stage.addEventListener("mousemove", (e) => {
      if (yay.style.display === "block") return;
      if (distToNo(e.clientX, e.clientY) < EVADE_DISTANCE) {
        maybeMove(e.clientX, e.clientY);
      }
    });

    noBtn.addEventListener("mouseenter", (e) => {
      if (yay.style.display === "block") return;
      // immediate move on hover attempt
      maybeMove(e.clientX, e.clientY);
    });

    // MOBILE: move when finger is anywhere on stage (fast + fun)
    stage.addEventListener("touchstart", (e) => {
      if (yay.style.display === "block") return;
      const t = e.touches[0];
      if (!t) return;
      maybeMove(t.clientX, t.clientY);
    }, {passive:true});

    stage.addEventListener("touchmove", (e) => {
      if (yay.style.display === "block") return;
      const t = e.touches[0];
      if (!t) return;
      if (distToNo(t.clientX, t.clientY) < EVADE_DISTANCE + 60) {
        maybeMove(t.clientX, t.clientY);
      }
    }, {passive:true});

    // If NO gets clicked: heartbreak overlay + sad burst
    function spawnSad(){
      const el = document.createElement("div");
      el.style.position = "fixed";
      el.style.left = (10 + Math.random() * 80) + "vw";
      el.style.top  = (10 + Math.random() * 70) + "vh";
      el.style.fontSize = (16 + Math.random() * 20) + "px";
      el.style.zIndex = 10001;
      el.style.pointerEvents = "none";
      el.style.opacity = "1";
      el.textContent = ["üíî","üò≠","ü•∫","üò¢","ü´†"][Math.floor(Math.random()*5)];

      const dx = (Math.random() * 220 - 110);
      const dy = -(120 + Math.random() * 220);
      const dur = 900 + Math.random() * 700;

      el.animate(
        [
          { transform: "translate(0,0) scale(1)", opacity: 1 },
          { transform: `translate(${dx}px, ${dy}px) scale(${0.6 + Math.random()*0.8})`, opacity: 0 }
        ],
        { duration: dur, easing: "cubic-bezier(.2,.8,.2,1)" }
      );

      document.body.appendChild(el);
      setTimeout(() => el.remove(), dur + 50);
    }

    function showHeartbreak(){
      const hb = document.getElementById("heartbreak");
      hb.style.display = "grid";
      for (let i = 0; i < 26; i++) setTimeout(spawnSad, i * 40);
      setTimeout(() => hb.style.display = "none", 2500);
    }

    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      hint.textContent = "Oh no‚Ä¶ üíî";
      showHeartbreak();

      // after heartbreak, make it run away again
      maybeMove(Math.random()*window.innerWidth, Math.random()*window.innerHeight);
    });

    // initial placement of NO
    window.addEventListener("load", () => {
      const r = stage.getBoundingClientRect();
      randomNearPointer(r.left + r.width*0.78, r.top + r.height*0.55);
    });

    // ---- slideshow + finale ----
    let slideIdx = 0;
    let slideTimer = null;
    let finaleShownThisLoop = false;

    function buildSlides(){
      [...slideshow.querySelectorAll(".slide")].forEach(n => n.remove());

      PHOTOS.forEach((p, i) => {
        const d = document.createElement("div");
        d.className = "slide" + (i === 0 ? " active" : "");
        d.style.backgroundImage = `url("${p.src}")`;
        d.dataset.caption = p.caption || "";
        slideshow.insertBefore(d, captionEl);
      });

      captionEl.textContent = PHOTOS[0]?.caption || "";
    }

    function spawnFirework() {
      const el = document.createElement("div");
      el.style.position = "fixed";
      el.style.left = (10 + Math.random() * 80) + "vw";
      el.style.top  = (10 + Math.random() * 60) + "vh";
      el.style.fontSize = (14 + Math.random() * 22) + "px";
      el.style.zIndex = 99999;
      el.style.pointerEvents = "none";
      el.style.opacity = "1";

      const chars = ["üéÜ","üéá","‚ú®","üí•","üéâ","ü•≥","üíñ","üíò"];
      el.textContent = chars[Math.floor(Math.random() * chars.length)];

      const dx = (Math.random() * 240 - 120);
      const dy = -(120 + Math.random() * 220);
      const dur = 900 + Math.random() * 700;

      el.animate(
        [
          { transform: "translate(0,0) scale(1)", opacity: 1 },
          { transform: `translate(${dx}px, ${dy}px) scale(${0.6 + Math.random()*0.8})`, opacity: 0 }
        ],
        { duration: dur, easing: "cubic-bezier(.2,.8,.2,1)" }
      );

      document.body.appendChild(el);
      setTimeout(() => el.remove(), dur + 50);
    }

    function showFinale() {
      const finale = document.getElementById("finale");
      finale.style.display = "grid";
      for (let i = 0; i < 90; i++) setTimeout(spawnFirework, i * 16);
      setTimeout(() => { finale.style.display = "none"; }, 4500);
    }

    function startSlideshow(){
      const slides = [...slideshow.querySelectorAll(".slide")];
      if (!slides.length) {
        captionEl.textContent = "No photos found ‚Äî check filenames.";
        return;
      }

      slideIdx = 0;
      finaleShownThisLoop = false;
      if (slideTimer) clearInterval(slideTimer);

      slideTimer = setInterval(() => {
        slides[slideIdx].classList.remove("active");
        slideIdx = (slideIdx + 1) % slides.length;
        slides[slideIdx].classList.add("active");
        captionEl.textContent = slides[slideIdx].dataset.caption || "";

        const lastIndex = slides.length - 1;
        if (slideIdx === lastIndex && !finaleShownThisLoop) {
          finaleShownThisLoop = true;
          showFinale();
        }
        if (slideIdx === 0) finaleShownThisLoop = false;

      }, SLIDE_MS);
    }

    // hearts burst when YES clicked
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = ["üíò","üíñ","üíó","üíû","üíï","‚ù§Ô∏è","üéâ","ü•≥"][Math.floor(Math.random()*8)];
      h.style.left = (Math.random()*100) + "vw";
      h.style.setProperty("--drift", (Math.random()*160 - 80) + "px");
      const dur = 2.0 + Math.random()*2.0;
      h.style.animationDuration = dur + "s";
      h.style.fontSize = (14 + Math.random()*22) + "px";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), dur*1000 + 200);
    }

    yesBtn.addEventListener("click", () => {
      stage.style.display = "none";
      hint.style.display = "none";
      yay.style.display = "block";

      for (let i=0; i<30; i++) setTimeout(spawnHeart, i*60);

      buildSlides();
      startSlideshow();
    });
  </script>
</body>
</html>
